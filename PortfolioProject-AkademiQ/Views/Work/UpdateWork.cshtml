@model Work
@{
    ViewData["Title"] = "Proje Güncelle";
    Layout = "~/Views/Admin/Index.cshtml";
}

<main class="flex-1 flex flex-col h-full overflow-hidden relative bg-background-dark">
    <div class="absolute top-0 right-0 w-[500px] h-[500px] bg-accent-blue/5 rounded-full blur-[120px] pointer-events-none"></div>

    <header class="flex items-center justify-between px-8 py-6 z-10 border-b border-white/5 bg-background-dark/80 backdrop-blur-md">
        <div>
            <h2 class="text-2xl font-bold text-white tracking-tight">Proje Güncelle</h2>
            <p class="text-text-muted text-sm mt-1">Portfolyonuza yeni bir çalışma veya proje ekleyin.</p>
        </div>
        <a href="/Work/Index" class="flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition-all text-sm font-medium border border-white/5">
            <span class="material-symbols-outlined text-[18px]">arrow_back</span>
            Listeye Dön
        </a>
    </header>

    <div class="flex-1 overflow-y-auto p-8 scroll-smooth relative z-0">
        <div class="max-w-6xl mx-auto">

            <form method="post" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <input type="hidden" value="@Model.WorkId" name="WorkId"/>
                <div class="lg:col-span-2 space-y-6">
                    <div class="bg-card-dark rounded-2xl border border-white/5 p-8 shadow-2xl relative overflow-hidden group">
                        <div class="absolute top-0 left-0 w-1 h-full bg-gradient-to-b from-accent-purple to-accent-blue opacity-50"></div>

                        <div class="flex items-center gap-4 mb-8">
                            <div class="size-12 rounded-xl bg-accent-purple/10 flex items-center justify-center text-accent-purple">
                                <span class="material-symbols-outlined text-2xl">folder_managed</span>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-white">Proje Detayları</h3>
                                <p class="text-xs text-text-muted">Projenin başlığı ve kısa açıklaması.</p>
                            </div>
                        </div>

                        <div class="mb-6 group/input">
                            <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 ml-1">Proje Başlığı</label>
                            <div class="relative">
                                <span class="material-symbols-outlined absolute left-4 top-3.5 text-gray-500 group-focus-within/input:text-white transition-colors">title</span>
                                <input type="text" asp-for="Title" class="w-full bg-background-darker border border-white/10 text-white text-sm rounded-xl block pl-12 p-3.5 focus:border-accent-purple focus:ring-1 focus:ring-accent-purple outline-none transition-all placeholder:text-gray-600" placeholder="Örn: E-Ticaret Yönetim Paneli" required>
                            </div>

                        </div>

                        <div class="mb-2 group/input">
                            <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 ml-1">Kategori / Alt Başlık</label>
                            <div class="relative">
                                <span class="material-symbols-outlined absolute left-4 top-3.5 text-gray-500 group-focus-within/input:text-white transition-colors">category</span>
                                <input type="text" required asp-for="SubTitle" class="w-full bg-background-darker border border-white/10 text-white text-sm rounded-xl block pl-12 p-3.5 focus:border-accent-blue focus:ring-1 focus:ring-accent-blue outline-none transition-all placeholder:text-gray-600" placeholder="Örn: Web Development & UI Design">
                            </div>
                            <p class="text-[10px] text-gray-500 mt-2 pl-1">* Bu alan kartın üzerinde kategori etiketi olarak da kullanılacaktır.</p>

                        </div>
                    </div>

                    <div class="hidden lg:flex items-center justify-end gap-4">
                        <a href="/Work/Index" class="px-6 py-2.5 rounded-lg text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-colors">
                            Vazgeç
                        </a>
                        <button type="submit" class="flex items-center gap-2 px-8 py-2.5 rounded-lg bg-gradient-accent hover:opacity-90 text-white font-bold text-sm transition-all shadow-lg shadow-accent-purple/20 active:scale-95">
                            <span class="material-symbols-outlined text-[18px]">save</span>
                            Projeyi Kaydet
                        </button>
                    </div>
                </div>

                <div class="lg:col-span-1 space-y-6">
                    <div class="bg-card-dark rounded-2xl border border-white/5 p-6 shadow-lg sticky top-6">
                        <h3 class="text-sm font-bold text-white mb-4 flex items-center gap-2">
                            <span class="material-symbols-outlined text-accent-blue text-lg">image</span>
                            Görsel Önizleme
                        </h3>

                        <div class="aspect-video w-full rounded-xl border-2 border-dashed border-white/10 bg-background-darker overflow-hidden relative group mb-6 flex items-center justify-center">
                            <img id="previewImage" src="" class="w-full h-full object-cover hidden" alt="Preview" />

                            <div id="placeholderState" class="flex flex-col items-center justify-center text-gray-600 transition-opacity">
                                <span class="material-symbols-outlined text-4xl mb-2 opacity-50">add_photo_alternate</span>
                                <span class="text-xs">Önizleme burada görünecek</span>
                            </div>

                            <div class="absolute inset-0 bg-accent-purple/10 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"></div>
                        </div>

                        <div class="group/input">
                            <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 ml-1">Görsel Bağlantısı (URL)</label>
                            <div class="relative">
                                <span class="material-symbols-outlined absolute left-4 top-3.5 text-gray-500 group-focus-within/input:text-accent-blue transition-colors">link</span>
                                <input type="text" asp-for="ImageUrl" id="imageUrlInput" class="w-full bg-background-darker border border-white/10 text-white text-sm rounded-xl block pl-12 p-3.5 focus:border-accent-blue focus:ring-1 focus:ring-accent-blue outline-none transition-all placeholder:text-gray-600" placeholder="https://...">
                            </div>
                            <span asp-validation-for="ImageUrl" class="text-red-400 text-xs mt-1 block pl-1"></span>
                        </div>

                        <button type="submit" class="w-full lg:hidden mt-6 flex items-center justify-center gap-2 px-6 py-3 rounded-xl bg-gradient-accent hover:opacity-90 text-white font-bold text-sm transition-all shadow-lg active:scale-95">
                            <span class="material-symbols-outlined">save</span>
                            Kaydet
                        </button>
                    </div>
                </div>

            </form>
        </div>
    </div>
</main>

<script>
    const urlInput = document.getElementById('imageUrlInput');
    const previewImg = document.getElementById('previewImage');
    const placeholder = document.getElementById('placeholderState');

    urlInput.addEventListener('input', function(e) {
        const url = e.target.value.trim();

        if (url) {
            previewImg.src = url;
            previewImg.classList.remove('hidden');
            placeholder.classList.add('hidden');

            previewImg.onerror = function() {
                previewImg.classList.add('hidden');
                placeholder.classList.remove('hidden');
            };
        } else {
            previewImg.classList.add('hidden');
            placeholder.classList.remove('hidden');
        }
    });
</script>